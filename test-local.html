<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Test - Bybit Event App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-city"></i> Bybit City</h1>
            <div class="user-points">
                <i class="fas fa-coins"></i>
                <span id="points-value">0</span> BP
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loading-page" class="page">
            <div class="loading-content">
                <i class="fas fa-city spinning"></i>
                <p>Building your city...</p>
            </div>
        </div>

        <!-- Quest Page -->
        <div id="quest-page" class="page" style="display: none;">
            <div class="page-header">
                <h2><i class="fas fa-tasks"></i> Construction Projects</h2>
                <p>Complete projects to earn Bybit Points (BP)</p>
            </div>
            <div id="quest-list" class="task-list">
                <!-- Quests will be loaded here -->
            </div>
        </div>

        <!-- Follow Page -->
        <div id="follow-page" class="page" style="display: none;">
            <div class="page-header">
                <h2><i class="fas fa-users"></i> Community Tasks</h2>
                <p>Join our community and earn rewards</p>
            </div>
            <div id="follow-list" class="task-list">
                <!-- Social tasks will be loaded here -->
            </div>
        </div>

        <!-- Invite Page -->
        <div id="invite-page" class="page" style="display: none;">
            <div class="page-header">
                <h2><i class="fas fa-user-plus"></i> Invite Citizens</h2>
                <p>Invite friends and earn rewards</p>
            </div>
            
            <div class="daily-checkin-section">
                <button id="daily-checkin-btn" class="daily-checkin-btn">
                    <i class="fas fa-calendar-check"></i> Daily Check-in
                </button>
            </div>

            <div class="invite-section">
                <h3>Your Referral Link</h3>
                <div class="invite-link-container">
                    <code id="invite-link">Loading...</code>
                    <button id="copy-invite-link-btn" class="copy-btn">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="referral-section">
                <h3>Your Referrals</h3>
                <div id="referral-history" class="referral-history">
                    <!-- Referral history will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Leaderboard Page -->
        <div id="leaderboard-page" class="page" style="display: none;">
            <div class="page-header">
                <h2><i class="fas fa-trophy"></i> City Leaders</h2>
                <p>Top citizens by Bybit Points</p>
            </div>
            <div id="leaderboard-list" class="leaderboard-list">
                <!-- Leaderboard will be loaded here -->
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile-page" class="page" style="display: none;">
            <div class="page-header">
                <h2><i class="fas fa-user"></i> Citizen Profile</h2>
            </div>
            <div class="profile-content">
                <div class="profile-item">
                    <label>Telegram ID:</label>
                    <span id="profile-tg-id">-</span>
                </div>
                <div class="profile-item">
                    <label>Username:</label>
                    <span id="profile-username">-</span>
                </div>
                <div class="profile-item">
                    <label>Points:</label>
                    <span id="profile-points">0</span> BP
                </div>
                <div class="profile-item">
                    <label>Referrals:</label>
                    <span id="profile-invites">0</span>
                </div>
                <div class="profile-item">
                    <label>Last Check-in:</label>
                    <span id="profile-last-checkin">Never</span>
                </div>
                <div class="profile-item">
                    <label>Bybit UID:</label>
                    <input type="text" id="bybit-uid-input" placeholder="Enter your Bybit UID">
                    <button id="submit-uid-btn">Update</button>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-bar">
            <button class="nav-btn active" data-page="quest-page">
                <i class="fas fa-tasks"></i>
                <span>Projects</span>
            </button>
            <button class="nav-btn" data-page="follow-page">
                <i class="fas fa-users"></i>
                <span>Community</span>
            </button>
            <button class="nav-btn" data-page="invite-page">
                <i class="fas fa-user-plus"></i>
                <span>Invite</span>
            </button>
            <button class="nav-btn" data-page="leaderboard-page">
                <i class="fas fa-trophy"></i>
                <span>Leaders</span>
            </button>
            <button class="nav-btn" data-page="profile-page">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </button>
        </div>
    </div>

    <script>
        // Mock Telegram WebApp for local testing
        window.Telegram = {
            WebApp: {
                initData: 'test',
                initDataUnsafe: {
                    user: {
                        id: 123456789,
                        first_name: 'TestUser',
                        username: 'testuser'
                    },
                    bot_username: 'testbot'
                },
                ready: () => console.log('Telegram WebApp ready'),
                expand: () => console.log('Telegram WebApp expanded'),
                showAlert: (message) => alert(message),
                showPopup: (config) => alert(config.message),
                openLink: (url) => window.open(url, '_blank')
            }
        };
    </script>
    <script src="app.js"></script>
</body>
</html>